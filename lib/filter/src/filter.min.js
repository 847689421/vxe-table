"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _conf=_interopRequireDefault(require("../../conf")),_vXETable=require("../../v-x-e-table");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var _default={name:"VxeTableFilter",props:{filterStore:Object,optimizeOpts:Object},render:function(e){var t=this.filterStore,i=this.optimizeOpts,l=t.column,n=l?l.own.filterRender:null,r=n?_vXETable.Renderer.get(n.name):null;return e("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",r&&r.className?r.className:"",{"t--animat":i.animat,"is--multiple":t.multiple,"filter--active":t.visible}],style:t.style},t.visible?[e("div",{class:"vxe-table--filter-body"},this.renderOptions(e,n,r)),this.renderFooter(e)]:[])},methods:{renderOptions:function(i,e,t){var l,n=this,r=this.$parent,c=this.filterStore,o=r.vSize,a=c.args,s=c.column,f=c.multiple,u=s.slots;if(u&&u.filter)return u.filter.call(r,Object.assign({$table:r,context:this},a),i);if(t&&t.renderFilter)return t.renderFilter.call(r,i,e,a,this);var d=[i("div",{class:["vxe-table--filter-option",{"is--active":!c.options.some(function(e){return e.checked})}],attrs:{title:_conf.default.i18n("vxe.table.allTitle")}},[f?i("label",{class:["vxe-checkbox",(_defineProperty(l={},"size--".concat(o),o),_defineProperty(l,"is--indeterminate",c.isIndeterminate),l)]},[i("input",{attrs:{type:"checkbox"},domProps:{checked:c.isAllSelected},on:{change:function(e){return n.filterCheckAllEvent(e,e.target.checked)}}}),i("span",{class:"vxe-checkbox--icon"}),i("span",{class:"vxe-checkbox--label"},_conf.default.i18n("vxe.table.allFilter"))]):i("span",{class:"vxe-table--filter-label",on:{click:r.resetFilterEvent}},_conf.default.i18n("vxe.table.allFilter"))])];return c.options.forEach(function(t,e){d.push(i("li",{class:["vxe-table--filter-option",{"is--active":t.checked}],attrs:{title:t.label},key:e},[f?i("label",{class:["vxe-checkbox",_defineProperty({},"size--".concat(o),o)]},[i("input",{attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){return n.changeMultipleOption(e,e.target.checked,t)}}}),i("span",{class:"vxe-checkbox--icon"}),i("span",{class:"vxe-checkbox--label"},t.label)]):i("span",{class:"vxe-table--filter-label",on:{click:function(e){return n.changeRadioOption(e,!t.checked,t)}}},t.label)]))}),d},renderFooter:function(e){var t=this.filterStore,i=t.column,l=t.multiple,n=i.own.filterRender,r=n?_vXETable.Renderer.get(n.name):null;return!l||r&&!1===r.isFooter?null:e("div",{class:"vxe-table--filter-footer"},[e("button",{class:{"is--disabled":!t.isAllSelected&&!t.isIndeterminate},attrs:{disabled:!t.isAllSelected&&!t.isIndeterminate},on:{click:this.confirmFilter}},_conf.default.i18n("vxe.table.confirmFilter")),e("button",{on:{click:this.resetFilter}},_conf.default.i18n("vxe.table.resetFilter"))])},filterCheckAllEvent:function(e,t){var i=this.filterStore;i.options.forEach(function(e){e.checked=t}),i.isAllSelected=t,i.isIndeterminate=!1},checkOptions:function(){var e=this.filterStore;e.isAllSelected=e.options.every(function(e){return e.checked}),e.isIndeterminate=!e.isAllSelected&&e.options.some(function(e){return e.checked})},changeRadioOption:function(e,t,i){this.filterStore.options.forEach(function(e){e.checked=!1}),i.checked=t,this.checkOptions(),this.$parent.confirmFilterEvent()},changeMultipleOption:function(e,t,i){i.checked=t,this.checkOptions()},changeOption:function(e,t,i){this.filterStore.multiple?this.changeMultipleOption(e,t,i):this.changeRadioOption(e,t,i)},confirmFilter:function(){this.$parent.confirmFilterEvent()},resetFilter:function(){this.$parent.resetFilterEvent()}}};exports.default=_default;
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},render:function(I){var C=this.$parent,U=this.fixedType,e=this.fixedColumn,l=this.tableColumn,k=this.footerData,W=C.$listeners,E=C.border,t=C.footerRowClassName,P=C.footerCellClassName,S=C.footerAlign,A=C.footerSpanMethod,D=C.align,o=C.tableWidth,r=C.scrollbarWidth,n=C.scrollbarHeight,i=C.scrollXLoad,c=C.scrollXStore,L=C.showOverflow,F=C.overflowX,O=C.getColumnMapIndex;return U&&L?o=(l=e).reduce(function(e,l){return e+l.renderWidth},0):i&&(U&&(l=e),o=l.reduce(function(e,l){return e+l.renderWidth},0)),I("div",{class:["vxe-table--footer-wrapper",U?"fixed--".concat(U,"-wrapper"):"footer--wrapper"],style:{"margin-top":"".concat(-n-1,"px")},on:{scroll:this.scrollEvent}},[!U&&i?I("div",{class:["vxe-body--x-space"],style:{width:"".concat(C.tableWidth,"px")}}):null,I("table",{class:"vxe-table--footer",attrs:{cellspacing:0,cellpadding:0,border:0},style:{width:null===o?o:"".concat(o+r,"px"),"margin-left":U?null:"".concat(c.leftSpaceWidth,"px")}},[I("colgroup",l.map(function(e,l){return I("col",{attrs:{name:e.id,width:e.renderWidth},key:l})}).concat([I("col",{attrs:{name:"col_gutter",width:r}})])),I("tfoot",k.map(function(g,T){return I("tr",{class:["vxe-footer--row",t?_xeUtils.default.isFunction(t)?t({$table:C,$rowIndex:T,fixed:U}):t:""]},l.map(function(l,t){var e,o=l.showOverflow,r=l.renderWidth,n=l.columnKey,i=l.footerAlign,c=l.align,a=l.children&&l.children.length,d=U?l.fixed!==U&&!a:l.fixed&&F,s=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?L:o,u=i||c||S||D,f="title"===s,x=!0===s||"tooltip"===s,p=f||x||"ellipsis"===s,m={"data-colid":l.id},h={},b=O(l);if((f||x)&&(h.mouseover=function(e){f?_tools.DomTools.updateCellTitle(e):x&&C.triggerFooterTooltipEvent(e,{$table:C,$rowIndex:T,column:l,columnIndex:b,$columnIndex:t,fixed:U})}),x&&(h.mouseout=function(e){C.clostTooltip()}),W["header-cell-click"]&&(h.click=function(e){_tools.UtilTools.emitEvent(C,"header-cell-click",[{$table:C,$rowIndex:T,column:l,columnIndex:b,$columnIndex:t,fixed:U,cell:e.currentTarget},e])}),W["header-cell-dblclick"]&&(h.dblclick=function(e){_tools.UtilTools.emitEvent(C,"header-cell-dblclick",[{$table:C,$rowIndex:T,column:l,columnIndex:b,$columnIndex:t,fixed:U,cell:e.currentTarget},e])}),A){var v=A({$table:C,$rowIndex:T,column:l,columnIndex:b,$columnIndex:t,fixed:U,data:k})||{},w=v.rowspan,y=void 0===w?1:w,$=v.colspan,_=void 0===$?1:$;if(!y||!_)return null;m.rowspan=y,m.colspan=_}return I("td",{class:["vxe-footer--column",l.id,(e={},_defineProperty(e,"col--".concat(u),u),_defineProperty(e,"fixed--hidden",d),_defineProperty(e,"col--ellipsis",p),_defineProperty(e,"filter--active",l.filters.some(function(e){return e.checked})),e),P?_xeUtils.default.isFunction(P)?P({$table:C,$rowIndex:T,column:l,columnIndex:b,$columnIndex:t,fixed:U}):P:""],attrs:m,on:h,key:n||(C.columnKey?l.id:b)},[I("div",{class:"vxe-cell",style:{width:p?"".concat(E?r-1:r,"px"):null}},_tools.UtilTools.formatText(g[C.tableColumn.indexOf(l)],1))])}).concat([I("td",{class:["col--gutter"],style:{width:"".concat(r,"px")}})]))}))])])},methods:{scrollEvent:function(e){var l=this.$parent,t=this.fixedType,o=l.$refs,r=l.scrollXLoad,n=l.triggerScrollXEvent,i=o.tableHeader,c=i?i.$el:null,a=o.tableBody.$el,d=o.tableFooter.$el.scrollLeft;l.lastScrollTime=Date.now(),c&&(c.scrollLeft=d),a&&(a.scrollLeft=d),r&&n(e),_tools.UtilTools.emitEvent(l,"scroll",[{type:"footer",fixed:t,scrollTop:a.scrollTop,scrollLeft:d,$table:l},e])}}};exports.default=_default;
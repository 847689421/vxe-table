"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},render:function(h){var b=this.$parent,v=this.fixedType,e=this.fixedColumn,l=this.tableColumn,t=this.footerData,y=b.$listeners,_=b.border,o=b.footerRowClassName,w=b.footerCellClassName,r=b.tableWidth,n=b.scrollbarWidth,i=b.scrollbarHeight,c=b.scrollXLoad,d=b.scrollXStore,g=b.showOverflow,$=b.overflowX,T=b.getColumnMapIndex;return v&&g?r=(l=e).reduce(function(e,l){return e+l.renderWidth},0):c&&(v&&(l=e),r=l.reduce(function(e,l){return e+l.renderWidth},0)),h("div",{class:["vxe-table--footer-wrapper",v?"fixed--".concat(v,"-wrapper"):"footer--wrapper"],style:{"margin-top":"".concat(-i-1,"px")},on:{scroll:this.scrollEvent}},[!v&&c?h("div",{class:["vxe-body--x-space"],style:{width:"".concat(b.tableWidth,"px")}}):null,h("table",{class:"vxe-table--footer",attrs:{cellspacing:0,cellpadding:0,border:0},style:{width:null===r?r:"".concat(r+n,"px"),"margin-left":v?null:"".concat(d.leftSpaceWidth,"px")}},[h("colgroup",l.map(function(e,l){return h("col",{attrs:{name:e.id,width:e.renderWidth},key:l})}).concat([h("col",{attrs:{width:n}})])),h("tfoot",t.map(function(p,m){return h("tr",{class:["vxe-footer--row",o?_xeUtils.default.isFunction(o)?o({$rowIndex:m,fixed:v}):o:""]},l.map(function(l,t){var e,o=l.showOverflow,r=l.renderWidth,n=l.columnKey,i=l.children&&l.children.length,c=v?l.fixed!==v&&!i:l.fixed&&$,d=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?g:o,a="title"===d,s=!0===d||"tooltip"===d,u=a||s||"ellipsis"===d,f={},x=T(l);return(a||s)&&(f.mouseover=function(e){a?_tools.DomTools.updateCellTitle(e):s&&b.triggerFooterTooltipEvent(e,{$table:b,$rowIndex:m,column:l,columnIndex:x,$columnIndex:t,fixed:v})}),s&&(f.mouseout=function(e){b.clostTooltip()}),y["header-cell-click"]&&(f.click=function(e){_tools.UtilTools.emitEvent(b,"header-cell-click",[{$table:b,$rowIndex:m,column:l,columnIndex:x,$columnIndex:t,fixed:v,cell:e.currentTarget},e])}),y["header-cell-dblclick"]&&(f.dblclick=function(e){_tools.UtilTools.emitEvent(b,"header-cell-dblclick",[{$table:b,$rowIndex:m,column:l,columnIndex:x,$columnIndex:t,fixed:v,cell:e.currentTarget},e])}),h("td",{class:["vxe-footer--column",l.id,(e={},_defineProperty(e,"col--".concat(l.headerAlign),l.headerAlign),_defineProperty(e,"fixed--hidden",c),_defineProperty(e,"col--ellipsis",u),_defineProperty(e,"filter--active",l.filters.some(function(e){return e.checked})),e),w?_xeUtils.default.isFunction(w)?w({$rowIndex:m,column:l,columnIndex:x,$columnIndex:t,fixed:v}):w:""],attrs:{"data-colid":l.id},on:f,key:n||(b.columnKey?l.id:x)},[h("div",{class:"vxe-cell",style:{width:u?"".concat(_?r-1:r,"px"):null}},_tools.UtilTools.formatText(p[b.tableColumn.indexOf(l)],1))])}).concat([h("td",{class:["col--gutter"],style:{width:"".concat(n,"px")}})]))}))])])},methods:{scrollEvent:function(e){var l=this.$parent,t=this.fixedType,o=l.$refs,r=l.scrollXLoad,n=l.triggerScrollXEvent,i=o.tableHeader,c=i?i.$el:null,d=o.tableBody.$el,a=o.tableFooter.$el.scrollLeft;l.lastScrollTime=Date.now(),c&&(c.scrollLeft=a),d&&(d.scrollLeft=a),r&&n(e),_tools.UtilTools.emitEvent(l,"scroll",[{type:"footer",fixed:t,scrollTop:d.scrollTop,scrollLeft:a,$table:l},e])}}};exports.default=_default;
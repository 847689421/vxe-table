"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},render:function(y){var _=this.$parent,w=this.fixedType,e=this.fixedColumn,l=this.tableColumn,t=this.footerData,g=_.$listeners,$=_.border,o=_.footerRowClassName,T=_.footerCellClassName,I=_.footerAlign,C=_.align,r=_.tableWidth,n=_.scrollbarWidth,i=_.scrollbarHeight,c=_.scrollXLoad,a=_.scrollXStore,U=_.showOverflow,k=_.overflowX,W=_.getColumnMapIndex;return w&&U?r=(l=e).reduce(function(e,l){return e+l.renderWidth},0):c&&(w&&(l=e),r=l.reduce(function(e,l){return e+l.renderWidth},0)),y("div",{class:["vxe-table--footer-wrapper",w?"fixed--".concat(w,"-wrapper"):"footer--wrapper"],style:{"margin-top":"".concat(-i-1,"px")},on:{scroll:this.scrollEvent}},[!w&&c?y("div",{class:["vxe-body--x-space"],style:{width:"".concat(_.tableWidth,"px")}}):null,y("table",{class:"vxe-table--footer",attrs:{cellspacing:0,cellpadding:0,border:0},style:{width:null===r?r:"".concat(r+n,"px"),"margin-left":w?null:"".concat(a.leftSpaceWidth,"px")}},[y("colgroup",l.map(function(e,l){return y("col",{attrs:{name:e.id,width:e.renderWidth},key:l})}).concat([y("col",{attrs:{width:n}})])),y("tfoot",t.map(function(b,v){return y("tr",{class:["vxe-footer--row",o?_xeUtils.default.isFunction(o)?o({$table:_,$rowIndex:v,fixed:w}):o:""]},l.map(function(l,t){var e,o=l.showOverflow,r=l.renderWidth,n=l.columnKey,i=l.footerAlign,c=l.align,a=l.children&&l.children.length,d=w?l.fixed!==w&&!a:l.fixed&&k,s=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?U:o,u=i||c||I||C,f="title"===s,x=!0===s||"tooltip"===s,p=f||x||"ellipsis"===s,m={},h=W(l);return(f||x)&&(m.mouseover=function(e){f?_tools.DomTools.updateCellTitle(e):x&&_.triggerFooterTooltipEvent(e,{$table:_,$rowIndex:v,column:l,columnIndex:h,$columnIndex:t,fixed:w})}),x&&(m.mouseout=function(e){_.clostTooltip()}),g["header-cell-click"]&&(m.click=function(e){_tools.UtilTools.emitEvent(_,"header-cell-click",[{$table:_,$rowIndex:v,column:l,columnIndex:h,$columnIndex:t,fixed:w,cell:e.currentTarget},e])}),g["header-cell-dblclick"]&&(m.dblclick=function(e){_tools.UtilTools.emitEvent(_,"header-cell-dblclick",[{$table:_,$rowIndex:v,column:l,columnIndex:h,$columnIndex:t,fixed:w,cell:e.currentTarget},e])}),y("td",{class:["vxe-footer--column",l.id,(e={},_defineProperty(e,"col--".concat(u),u),_defineProperty(e,"fixed--hidden",d),_defineProperty(e,"col--ellipsis",p),_defineProperty(e,"filter--active",l.filters.some(function(e){return e.checked})),e),T?_xeUtils.default.isFunction(T)?T({$table:_,$rowIndex:v,column:l,columnIndex:h,$columnIndex:t,fixed:w}):T:""],attrs:{"data-colid":l.id},on:m,key:n||(_.columnKey?l.id:h)},[y("div",{class:"vxe-cell",style:{width:p?"".concat($?r-1:r,"px"):null}},_tools.UtilTools.formatText(b[_.tableColumn.indexOf(l)],1))])}).concat([y("td",{class:["col--gutter"],style:{width:"".concat(n,"px")}})]))}))])])},methods:{scrollEvent:function(e){var l=this.$parent,t=this.fixedType,o=l.$refs,r=l.scrollXLoad,n=l.triggerScrollXEvent,i=o.tableHeader,c=i?i.$el:null,a=o.tableBody.$el,d=o.tableFooter.$el.scrollLeft;l.lastScrollTime=Date.now(),c&&(c.scrollLeft=d),a&&(a.scrollLeft=d),r&&n(e),_tools.UtilTools.emitEvent(l,"scroll",[{type:"footer",fixed:t,scrollTop:a.scrollTop,scrollLeft:d,$table:l},e])}}};exports.default=_default;
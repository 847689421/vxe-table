"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},render:function(U){var k=this.$parent,E=this.fixedType,e=this.fixedColumn,l=this.tableColumn,W=this.footerData,L=k.$listeners,P=k.border,t=k.footerRowClassName,S=k.footerCellClassName,A=k.footerAlign,D=k.footerSpanMethod,O=k.align,o=k.tableWidth,r=k.scrollbarWidth,n=k.scrollbarHeight,i=k.scrollXLoad,a=k.scrollXStore,X=k.showOverflow,q=k.overflowX,F=k.getColumnMapIndex;return E&&X?o=(l=e).reduce(function(e,l){return e+l.renderWidth},0):i&&(E&&(l=e),o=l.reduce(function(e,l){return e+l.renderWidth},0)),U("div",{class:["vxe-table--footer-wrapper",E?"fixed--".concat(E,"-wrapper"):"footer--wrapper"],style:{"margin-top":"".concat(-n-1,"px")},on:{scroll:this.scrollEvent}},[!E&&i?U("div",{class:["vxe-body--x-space"],style:{width:"".concat(k.tableWidth,"px")}}):null,U("table",{class:"vxe-table--footer",attrs:{cellspacing:0,cellpadding:0,border:0},style:{width:null===o?o:"".concat(o+r,"px"),"margin-left":E?null:"".concat(a.leftSpaceWidth,"px")}},[U("colgroup",l.map(function(e,l){return U("col",{attrs:{name:e.id,width:e.renderWidth},key:l})}).concat([U("col",{attrs:{name:"col_gutter",width:r}})])),U("tfoot",W.map(function(I,C){return U("tr",{class:["vxe-footer--row",t?_xeUtils.default.isFunction(t)?t({$table:k,$rowIndex:C,fixed:E}):t:""]},l.map(function(l,t){var e,o=l.showOverflow,r=l.renderWidth,n=l.columnKey,i=l.footerAlign,a=l.align,c=l.footerClassName,d=l.children&&l.children.length,s=E?l.fixed!==E&&!d:l.fixed&&q,u=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?X:o,f=i||a||A||O,x="title"===u,p=!0===u||"tooltip"===u,m=x||p||"ellipsis"===u,h={"data-colid":l.id},v={},b=F(l),g={$table:k,$rowIndex:C,column:l,columnIndex:b,$columnIndex:t,fixed:E};if((x||p)&&(v.mouseenter=function(e){x?_tools.DomTools.updateCellTitle(e):p&&k.triggerFooterTooltipEvent(e,{$table:k,$rowIndex:C,column:l,columnIndex:b,$columnIndex:t,fixed:E})}),p&&(v.mouseleave=function(e){p&&k.handleTargetLeaveEvent(e)}),L["header-cell-click"]&&(v.click=function(e){_tools.UtilTools.emitEvent(k,"header-cell-click",[{$table:k,$rowIndex:C,column:l,columnIndex:b,$columnIndex:t,fixed:E,cell:e.currentTarget},e])}),L["header-cell-dblclick"]&&(v.dblclick=function(e){_tools.UtilTools.emitEvent(k,"header-cell-dblclick",[{$table:k,$rowIndex:C,column:l,columnIndex:b,$columnIndex:t,fixed:E,cell:e.currentTarget},e])}),D){var w=D({$table:k,$rowIndex:C,column:l,columnIndex:b,$columnIndex:t,fixed:E,data:W})||{},y=w.rowspan,_=void 0===y?1:y,$=w.colspan,T=void 0===$?1:$;if(!_||!T)return null;h.rowspan=_,h.colspan=T}return U("td",{class:["vxe-footer--column",l.id,(e={},_defineProperty(e,"col--".concat(f),f),_defineProperty(e,"fixed--hidden",s),_defineProperty(e,"col--ellipsis",m),_defineProperty(e,"filter--active",l.filters.some(function(e){return e.checked})),e),_tools.UtilTools.getClass(c,g),_tools.UtilTools.getClass(S,g)],attrs:h,on:v,key:n||(k.columnKey?l.id:b)},[U("div",{class:"vxe-cell",style:{width:m?"".concat(P?r-1:r,"px"):null}},_tools.UtilTools.formatText(I[k.tableColumn.indexOf(l)],1))])}).concat([U("td",{class:["col--gutter"],style:{width:"".concat(r,"px")}})]))}))])])},methods:{scrollEvent:function(e){var l=this.$parent,t=this.fixedType,o=l.$refs,r=l.scrollXLoad,n=l.triggerScrollXEvent,i=o.tableHeader,a=i?i.$el:null,c=o.tableBody.$el,d=o.tableFooter.$el.scrollLeft;l.lastScrollTime=Date.now(),a&&(a.scrollLeft=d),c&&(c.scrollLeft=d),r&&n(e),_tools.UtilTools.emitEvent(l,"scroll",[{type:"footer",fixed:t,scrollTop:c.scrollTop,scrollLeft:d,$table:l},e])}}};exports.default=_default;
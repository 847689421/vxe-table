"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../conf")),_tools=require("../../tools");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _default2={name:"VxeTooltip",props:{value:Boolean,theme:{type:String,default:function(){return _conf.default.tooltip.theme}},content:[String,Function],zIndex:{type:Number,default:function(){return _conf.default.tooltip.zIndex}},isArrow:{type:Boolean,default:!0}},data:function(){return{isUpdate:!1,visible:!1,tipStore:{style:{},placement:"",arrowStyle:null}}},watch:{value:function(t){this.isUpdate||this[t?"show":"close"](),this.isUpdate=!1}},mounted:function(){var i=this,o=this.$el,t=this.value,l=o.parentNode;Array.from(o.children).forEach(function(t,e){1<e&&(l.insertBefore(t,o),i.target=t)}),l.removeChild(o),t&&this.show()},beforeDestroy:function(){var t=this.$el,e=t.parentNode;e&&e.removeChild(t)},render:function(t){var e=this.theme,i=this.content,o=this.isArrow,l=this.visible,n=this.tipStore;return t("div",{class:["vxe-table--tooltip-wrapper","theme--".concat(e),"placement--".concat(n.placement),{"is--visible":l,"is--arrow":o}],style:n.style,ref:"tipWrapper"},[t("div",{class:["vxe-table--tooltip-content"]},this.$slots.content||(_xeUtils.default.isFunction(i)?i.call(this,t):i)),t("div",{class:["vxe-table--tooltip-arrow"],style:n.arrowStyle})].concat(this.$slots.default))},methods:{show:function(){return this.toVisible(this.target)},close:function(){return Object.assign(this.tipStore,{style:{},placement:"",arrowStyle:null}),this.update(!1),this.$nextTick()},update:function(t){t!==this.visible&&(this.visible=t,this.isUpdate=!0,this.$emit("input",this.visible))},toVisible:function(o){var l=this;if(o){var n=this.$el,r=this.tipStore,s=this.zIndex,t=_tools.DomTools.getAbsolutePos(o),a=t.top,c=t.left,e=_tools.DomTools.getDomNode(),u=e.scrollTop,p=e.scrollLeft,h=e.visibleWidth,i=n.parentNode,f=c;return r.placement="top",r.arrowStyle={left:"50%"},i||document.body.appendChild(n),this.update(!0),this.$nextTick().then(function(){var t=n;if(t){var e=t.clientHeight,i=_xeUtils.default.toNumber(getComputedStyle(t).width);return f=c+Math.floor((o.clientWidth-i)/2),r.style={zIndex:s,width:"".concat(i,"px"),top:"".concat(a-e-6,"px"),left:"".concat(f,"px")},l.$nextTick()}}).then(function(){var t=n;if(t){var e=t.clientHeight,i=t.clientWidth;Object.assign(r.style,{top:"".concat(a-e-6,"px"),left:"".concat(f,"px")}),a-e<u+6&&(r.placement="bottom",r.style.top="".concat(a+o.clientHeight+6,"px")),f<p+6?(f=p+6,r.arrowStyle.left="".concat(f+16<c?c-f+16:16,"px"),r.style.left="".concat(f,"px")):p+h<f+i&&(f=p+h-i-6,r.arrowStyle.left="".concat(i-Math.max(Math.floor((f+i-c)/2),22),"px"),r.style.left="".concat(f,"px"))}})}return this.$nextTick()}}};exports.default=_default2;
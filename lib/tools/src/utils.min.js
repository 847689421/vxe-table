"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.UtilTools=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../conf"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}var columnUniqueId=0,ColumnConfig=function e(l){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.renderHeader,r=t.renderCell,i=t.renderData;_classCallCheck(this,e),l.cellRender&&l.editRender&&console.warn("[vxe-table] Properties cell-render and edit-render cannot be used together."),Object.assign(this,{id:"col_".concat(++columnUniqueId),type:l.type,prop:l.prop,property:l.field||l.prop,title:l.title,label:l.label,width:l.width,minWidth:l.minWidth,resizable:l.resizable,fixed:l.fixed,align:l.align,headerAlign:l.headerAlign,showOverflow:l.showOverflow,showHeaderOverflow:l.showHeaderOverflow,indexMethod:l.indexMethod,formatter:l.formatter,sortable:l.sortable,sortBy:l.sortBy,remoteSort:l.remoteSort,filters:(l.filters||[]).map(function(e){var l=e.label,t=e.value,n=e.data;return{label:l,value:t,data:n,_data:n,checked:!1}}),filterMultiple:!_xeUtils.default.isBoolean(l.filterMultiple)||l.filterMultiple,filterMethod:l.filterMethod,filterRender:l.filterRender,treeNode:l.treeNode,columnKey:l.columnKey,cellRender:l.cellRender,editRender:l.editRender,params:l.params,visible:!0,level:1,rowSpan:1,colSpan:1,order:null,renderWidth:0,renderHeight:0,resizeWidth:0,renderLeft:0,renderHeader:n||l.renderHeader,renderCell:r||l.renderCell,renderData:i,slots:l.slots,own:l})},UtilTools={getSize:function(e){var l=e.size,t=e.$parent;return l||(t&&-1<["medium","small","mini"].indexOf(t.size)?t.size:null)},getFuncText:function(e){return _xeUtils.default.isFunction(e)?e():_conf.default.translate?_conf.default.translate(e):e},getRowkey:function(e){var l=e.rowKey,t=e.rowId,n=e.selectConfig,r=void 0===n?{}:n,i=e.treeConfig,o=void 0===i?{}:i,a=e.expandConfig,d=void 0===a?{}:a,u=e.editConfig,s=void 0===u?{}:u;return l&&_xeUtils.default.isString(l)||(l=t||r.key||o.key||d.key||s.key||_conf.default.rowId),l},getRowid:function(e,l,t){var n=UtilTools.getRowkey(e);return"".concat(n?encodeURIComponent(_xeUtils.default.get(l,n)||""):t)},emitEvent:function(e,l,t){e.$listeners[l]&&e.$emit.apply(e,[l].concat(t))},getColumnList:function(e){var l=[];return e.forEach(function(e){l.push.apply(l,e.children&&e.children.length?UtilTools.getColumnList(e.children):[e])}),l},formatText:function(e,l){return""+(null==e?l?_conf.default.emptyCell:"":e)},getCellValue:function(e,l){return _xeUtils.default.get(e,l.property)},getCellLabel:function(e,l,t){var n=l.formatter,r=UtilTools.getCellValue(e,l),i=r;if(t&&n){var o=t.$table,a=o&&o.fullAllDataRowMap.has(e);if(a){var d=o.fullAllDataRowMap.get(e).formatData;if(d&&d.column===l&&d.value===r)return d.label}i=_xeUtils.default.isString(n)?_xeUtils.default[n](r):_xeUtils.default.isArray(n)?_xeUtils.default[n[0]].apply(_xeUtils.default,[r].concat(n.slice(1))):n(Object.assign({cellValue:r},t)),a&&(o.fullAllDataRowMap.get(e).formatData={column:l,value:r,label:i})}return i},setCellValue:function(e,l,t){return _xeUtils.default.set(e,l.property,t)},getColumnConfig:function(e,l){return e instanceof ColumnConfig?e:new ColumnConfig(e,l)},assemColumn:function(e){var l=e.$table,t=e.$parent,n=e.columnConfig,r=t.columnConfig;n.slots=e.$scopedSlots,r&&0<t.$children.length?(r.children||(r.children=[]),r.children.splice([].indexOf.call(t.$el.children,e.$el),0,n)):l.collectColumn.splice([].indexOf.call(l.$refs.hideColumn.children,e.$el),0,n)},destroyColumn:function(e){var l=e.$table,t=e.columnConfig,n=_xeUtils.default.findTree(l.collectColumn,function(e){return e===t});n&&n.items.splice(n.index,1)},hasChildrenList:function(e){return e&&e.children&&0<e.children.length}},_default=exports.UtilTools=UtilTools;exports.default=_default;
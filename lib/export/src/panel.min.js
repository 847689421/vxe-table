"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _conf=_interopRequireDefault(require("../../conf")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default={name:"VxeExportPanel",props:{defaultOptions:Object,storeData:Object,typeList:Array},data:function(){return{modeList:[{value:"all",label:"vxe.toolbar.expAll"},{value:"selected",label:"vxe.toolbar.expSelected"}]}},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize}},render:function(a){var t=this.defaultOptions,o=this.storeData,e=this.typeList,l=this.modeList;return a("vxe-modal",{res:"modal",model:{value:o.visible,callback:function(e){o.visible=e}},props:{title:_conf.default.i18n("vxe.toolbar.expTitle"),width:520,mask:!0,lockView:!0,showFooter:!1,maskClosable:!0},on:{show:this.showEvent}},[a("div",{class:"vxe-export--panel"},[a("table",{attrs:{cellspacing:0,cellpadding:0,border:0}},[a("tr",[a("td",_conf.default.i18n("vxe.toolbar.expName")),a("td",[a("input",{ref:"filename",attrs:{type:"text",placeholder:_conf.default.i18n("vxe.toolbar.expNamePlaceholder")},domProps:{value:t.filename},on:{input:function(e){t.filename=e.target.value}}})])]),a("tr",[a("td",_conf.default.i18n("vxe.toolbar.expType")),a("td",[a("select",{on:{change:function(e){t.type=e.target.value}}},e.map(function(e){return a("option",{attrs:{value:e},domProps:{selected:t.type===e}},e)}))])]),a("tr",[a("td",_conf.default.i18n("vxe.toolbar.expMode")),a("td",[a("select",{on:{change:function(e){o.mode=e.target.value}}},l.map(function(e){return a("option",{attrs:{value:e.value},domProps:{selected:o.mode===e.value}},_conf.default.i18n(e.label))}))])]),a("tr",[a("td",_conf.default.i18n("vxe.toolbar.expColumn")),a("td",[a("ul",{class:"vxe-export--panel-column"},o.columns.map(function(e){var t=e.own,o=e.checked,l=e.type;return a("li",{class:{active:o},on:{click:function(){e.checked=!o}}},_tools.UtilTools.getFuncText(t.title||t.label||("index"===l?_conf.default.i18n("vxe.column.indexTitle"):"")))}))])]),a("tr",[a("td",_conf.default.i18n("vxe.toolbar.expOpts")),a("td",[a("vxe-checkbox",{model:{value:t.isHeader,callback:function(e){t.isHeader=e}}},_conf.default.i18n("vxe.toolbar.expOptHeader")),a("vxe-checkbox",{props:{disabled:!o.hasFooter},model:{value:t.isFooter,callback:function(e){t.isFooter=e}}},_conf.default.i18n("vxe.toolbar.expOptFooter")),a("vxe-checkbox",{props:{disabled:o.forceOriginal},model:{value:t.original,callback:function(e){t.original=e}}},_conf.default.i18n("vxe.toolbar.expOptOriginal"))])])]),a("div",{class:"vxe-export--panel-btns"},[a("vxe-button",{props:{type:"primary"},on:{click:this.exportEvent}},_conf.default.i18n("vxe.toolbar.expConfirm"))])])])},methods:{showEvent:function(){var e=this;this.$nextTick(function(){e.$refs.filename.focus()})},exportEvent:function(){var e=this.storeData,t=this.defaultOptions,o=Object.assign({columns:e.columns.filter(function(e){return e.checked})},t);o.filename||(o.filename=_conf.default.i18n("vxe.toolbar.expTitle")),"selected"===e.mode&&(o.data=e.selectRecords),e.visible=!1,this.$emit("export",o)}}};exports.default=_default;